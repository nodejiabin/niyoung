<!--pages/index/index.wxml-->
<view class="container">
  <!-- æœç´¢åŒºåŸŸ -->
  <view class="search-container">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢è½¦å‹ã€å“ç‰Œæˆ–å†…å®¹..."
        value="{{searchValue}}"
        bindinput="onSearchInput"
      />
    </view>
  </view>

  <!-- è½®æ’­å›¾ -->
  <view class="banner-container" wx:if="{{banners.length > 0}}">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{3000}}">
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <image class="banner-image" src="{{item.image}}" mode="aspectFill" />
      </swiper-item>
    </swiper>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-container">
    <view class="category-title">è½¦å‹åˆ†ç±»</view>
    <view class="category-list">
      <view 
        class="category-item" 
        wx:for="{{categories}}" 
        wx:key="id"
        data-category="{{item.name}}"
        bindtap="onCategoryTap"
      >
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- å†…å®¹ç­›é€‰ -->
  <view class="content-header">
    <view class="content-title">ç²¾å½©åˆ†äº«</view>
    <view class="content-filter">
      <view 
        class="filter-item {{currentFilter === 'latest' ? 'active' : ''}}"
        data-filter="latest"
        bindtap="onFilterTap"
      >
        æœ€æ–°
      </view>
      <view 
        class="filter-item {{currentFilter === 'hot' ? 'active' : ''}}"
        data-filter="hot"
        bindtap="onFilterTap"
      >
        çƒ­é—¨
      </view>
    </view>
  </view>

  <!-- å†…å®¹åˆ—è¡¨ -->
  <view class="content-container">
    <view class="content-list">
      <view 
        class="content-item card"
        wx:for="{{contentList}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onContentTap"
      >
        <!-- ç”¨æˆ·ä¿¡æ¯ -->
        <view class="user-info">
          <image class="user-avatar avatar" src="{{item.userAvatar}}" mode="aspectFill" />
          <view class="user-details">
            <view class="user-name">{{item.userName}}</view>
            <view class="post-time text-light">{{item.createTime}}</view>
          </view>
        </view>

        <!-- å†…å®¹æ–‡æœ¬ -->
        <view class="content-text">{{item.content}}</view>

        <!-- å›¾ç‰‡å±•ç¤º -->
        <view class="content-images" wx:if="{{item.images.length > 0}}">
          <image 
            class="content-image"
            wx:for="{{item.images}}" 
            wx:for-item="image"
            wx:key="*this"
            src="{{image}}" 
            mode="aspectFill"
            data-images="{{item.images}}"
            data-current="{{image}}"
            bindtap="onImageTap"
          />
        </view>

        <!-- è½¦è¾†ä¿¡æ¯ -->
        <view class="car-info">
          <view class="car-brand">{{item.carInfo.brand}} {{item.carInfo.model}}</view>
          <view class="car-year text-light">{{item.carInfo.year}}å¹´</view>
        </view>

        <!-- æ“ä½œæ  -->
        <view class="action-bar">
          <view 
            class="action-item"
            data-id="{{item.id}}"
            bindtap="onLikeTap"
          >
            <text class="action-icon">{{item.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
            <text class="action-text">{{item.likeCount}}</text>
          </view>
          <view 
            class="action-item"
            data-id="{{item.id}}"
            bindtap="onCollectTap"
          >
            <text class="action-icon">{{item.isCollected ? 'â­' : 'â˜†'}}</text>
            <text class="action-text">{{item.collectCount}}</text>
          </view>
          <view 
            class="action-item"
            data-id="{{item.id}}"
            bindtap="onShareTap"
          >
            <text class="action-icon">ğŸ“¤</text>
            <text class="action-text">åˆ†äº«</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{hasMore}}">
      <view class="load-more-btn" bindtap="loadMore">
        {{loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š'}}
      </view>
    </view>

    <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
    <view class="no-more text-center text-light" wx:if="{{!hasMore && contentList.length > 0}}">
      æ²¡æœ‰æ›´å¤šå†…å®¹äº†
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{contentList.length === 0 && !loading}}">
      <text class="empty-icon">ğŸš—</text>
      <text class="empty-text">æš‚æ— åˆ†äº«å†…å®¹</text>
      <text class="empty-desc">å¿«æ¥åˆ†äº«ä½ çš„çˆ±è½¦å§ï¼</text>
    </view>
  </view>
</view> 